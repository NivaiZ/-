const clickBurgerMenuFunction=()=>{const e=document.querySelector(".header-block__burger"),o=document.querySelector(".header-block__content");e.addEventListener("click",(()=>{e.classList.toggle("header-block__burger--open"),o.classList.toggle("header-block__content--open")})),window.addEventListener("click",(c=>{const t=c.target;t.closest(".header-block__content")||t.closest(".header-block__burger")||(o.classList.remove("header-block__content--open"),e.classList.remove("header-block__burger--open"))})),window.addEventListener("keydown",(c=>{27===c.keyCode&&o.classList.contains("header-block__content--open")&&(c.preventDefault(),o.classList.remove("header-block__content--open"),e.classList.remove("header-block__burger--open"))}))};clickBurgerMenuFunction();
const onEscKey=e=>"Escape"===e.key||"Esc"===e.key,EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,addForm=document.querySelector(".modal-content__send"),addFormEmail=addForm.querySelector("#modal__email"),onClickAndKeydown=e=>{e.addEventListener("click",(()=>{e.remove()})),document.addEventListener("keydown",(o=>{onEscKey(o)&&e.remove()}))},onShowPopupSuccess=()=>{const e=document.querySelector("#success").content.querySelector(".modal-content__message--success").cloneNode(!0);document.body.appendChild(e),onClickAndKeydown(e)},onShowPopupError=()=>{const e=document.querySelector("#error").content.querySelector(".modal-content__message--error").cloneNode(!0);document.body.appendChild(e),onClickAndKeydown(e)};function onSuccess(e){onShowPopupSuccess()}function onError(){onShowPopupError()}function serializeForm(e){return new FormData(e)}function checkValidity(e){const o=e.target.form,t=o.checkValidity();onInput(),o.querySelector(".modal__submit--button").disabled=!t}async function sendData(e){return await fetch("http://httpbin.org/post",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:e})}async function handleFormSubmit(e){e.preventDefault();const o=serializeForm(e.target),{status:t,error:n}=await sendData(o);200===t?onSuccess(e.target):onError(n)}const isEmailValid=e=>EMAIL_REGEXP.test(e),onInput=()=>{var e;e=addFormEmail.value,EMAIL_REGEXP.test(e)?addFormEmail.style.borderColor="green":addFormEmail.style.borderColor="red"},applicantForm=document.getElementById("modal__form");applicantForm.addEventListener("submit",handleFormSubmit),applicantForm.addEventListener("input",checkValidity),applicantForm.querySelector(".modal__submit--button").disabled=!0;
const clickAddClassButtonFuction=()=>{const e=document.querySelector(".feedback-block__link"),o=document.querySelector(".modal-content__form"),t=document.querySelector("body"),n=document.querySelector(".modal-content"),l=document.querySelector(".modal-content__button"),c=t.querySelector("#modal__name"),s=t.querySelector("#moda__email");let a=!0,d="";try{d=localStorage.getItem("name"),d=localStorage.getItem("email")}catch(e){a=!1}e.addEventListener("click",(e=>{e.preventDefault(),o.classList.toggle("modal-content__form--open"),t.classList.toggle("modal-content__body--noscroll"),n.classList.toggle("modal-content__open"),c.focus(),d?(c.value=d,s.value=d,console.log(d)):c.focus()})),l.addEventListener("click",(()=>{n.classList.remove("modal-content__open"),t.classList.remove("modal-content__body--noscroll"),o.classList.remove("modal-content__form--open")})),window.addEventListener("keydown",(e=>{27===e.keyCode&&n.classList.contains("modal-content__open")&&(e.preventDefault(),n.classList.remove("modal-content__open"),t.classList.remove("modal-content__body--noscroll"),o.classList.remove("modal-content__form--open"))})),window.addEventListener("click",(e=>{e.target===n&&(n.classList.remove("modal-content__open"),o.classList.remove("modal-content__form--open"),t.classList.remove("modal-content__body--noscroll"))}))};clickAddClassButtonFuction();