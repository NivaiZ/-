const clickBurgerMenuFunction=()=>{const e=document.querySelector(".header-block__burger"),c=document.querySelector(".header-block__content");e.addEventListener("click",(()=>{e.classList.toggle("header-block__burger--open"),c.classList.toggle("header-block__content--open")})),document.addEventListener("click",(o=>{const t=o.target;t.closest(".header-block__content")||t.closest(".header-block__burger")||(c.classList.remove("header-block__content--open"),e.classList.remove("header-block__burger--open"))})),document.addEventListener("keydown",(o=>{27===o.keyCode&&c.classList.contains("header-block__content--open")&&(o.preventDefault(),c.classList.remove("header-block__content--open"),e.classList.remove("header-block__burger--open"))}))};clickBurgerMenuFunction();
const onEscKey=e=>"Escape"===e.key||"Esc"===e.key,EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,addForm=document.querySelector(".modal-content__send"),addFormEmail=addForm.querySelector("#modal__email"),onClickAndKeydown=e=>{e.addEventListener("click",(()=>{e.remove()})),document.addEventListener("keydown",(o=>{onEscKey(o)&&e.remove()}))},onShowPopupSuccess=()=>{const e=document.querySelector("#success").content.querySelector(".modal-content__message--success").cloneNode(!0);document.body.appendChild(e),onClickAndKeydown(e)},onShowPopupError=()=>{const e=document.querySelector("#error").content.querySelector(".modal-content__message--error").cloneNode(!0);document.body.appendChild(e),onClickAndKeydown(e)};function onSuccess(e){onShowPopupSuccess()}function onError(){onShowPopupError()}function serializeForm(e){return new FormData(e)}function checkValidity(e){const o=e.target.form,t=o.checkValidity();o.querySelector(".modal__submit--button").disabled=!t}async function sendData(e){return await fetch("https://httpbin.org/post",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:e})}async function handleFormSubmit(e){e.preventDefault();const o=serializeForm(e.target),{status:t,error:n}=await sendData(o);200===t?onSuccess(e.target):onError(n)}const isEmailValid=e=>EMAIL_REGEXP.test(e),applicantForm=document.getElementById("modal__form");applicantForm.addEventListener("submit",handleFormSubmit),applicantForm.addEventListener("input",checkValidity),applicantForm.querySelector(".modal__submit--button").disabled=!0;
const clickAddClassButtonFuction=()=>{const e=document.querySelector(".feedback-block__link"),o=document.querySelector(".modal-content__form"),t=document.querySelector("body"),n=document.querySelector(".modal-content"),c=document.querySelector(".modal-content__button"),l=t.querySelector("#modal__name");t.querySelector("#moda__email");e.addEventListener("click",(e=>{e.preventDefault(),o.classList.toggle("modal-content__form--open"),t.classList.toggle("modal-content__body--noscroll"),n.classList.toggle("modal-content__open"),l.focus()})),c.addEventListener("click",(()=>{n.classList.remove("modal-content__open"),t.classList.remove("modal-content__body--noscroll"),o.classList.remove("modal-content__form--open")})),document.addEventListener("keydown",(e=>{27===e.keyCode&&n.classList.contains("modal-content__open")&&(e.preventDefault(),n.classList.remove("modal-content__open"),t.classList.remove("modal-content__body--noscroll"),o.classList.remove("modal-content__form--open"))})),document.addEventListener("click",(e=>{e.target===n&&(n.classList.remove("modal-content__open"),o.classList.remove("modal-content__form--open"),t.classList.remove("modal-content__body--noscroll"))}))};clickAddClassButtonFuction();